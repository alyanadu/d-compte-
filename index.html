<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>D-Compte jusqu'au 17 aoÃ»t ðŸ’•</title>
  <link rel="apple-touch-icon" href="icon.png">
  <style>
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      text-align: center;
      transition: background 1s ease;
    }
    h1 {
      padding-top: 20px;
      font-size: 1.8em;
      color: #b93a63;
    }
    #countdown, #dodos {
      font-size: 1.2em;
      margin: 10px 0;
    }
    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 8px;
      max-width: 700px;
      margin: 20px auto;
      padding: 10px;
    }
    .day {
      background: white;
      border-radius: 10px;
      padding: 10px;
      font-size: 0.9em;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .day input[type="checkbox"] {
      transform: scale(1.3);
    }
    .footer {
      margin: 20px 0;
      font-size: 0.9em;
      color: #555;
    }
  </style>
</head>
<body>
  <h1>ðŸ’— Plus que quelques dodos avant de le retrouver ðŸ’—</h1>
  <div id="countdown"></div>
  <div id="dodos"></div>
  <div class="calendar" id="calendar"></div>
  <div class="footer">Fait avec amour ðŸŒ¸</div>

  <script>
    // Couleurs pastels fixes par date
    const backgroundColors = {
      "2025-07-27": "#FFD1DC",
      "2025-07-28": "#FFDFD3",
      "2025-07-29": "#FFF0D9",
      "2025-07-30": "#D0F4DE",
      "2025-07-31": "#DAD4EF",
      "2025-08-01": "#C5FAD5",
      "2025-08-02": "#E4C1F9",
      "2025-08-03": "#FDCBFF",
      "2025-08-04": "#E3F2FD",
      "2025-08-05": "#FFF9C4",
      "2025-08-06": "#FFECB3",
      "2025-08-07": "#B2EBF2",
      "2025-08-08": "#F8BBD0",
      "2025-08-09": "#DCEDC8",
      "2025-08-10": "#FFCCBC",
      "2025-08-11": "#D7CCC8",
      "2025-08-12": "#C8E6C9",
      "2025-08-13": "#F0F4C3",
      "2025-08-14": "#E1BEE7",
      "2025-08-15": "#FFCDD2",
      "2025-08-16": "#D1C4E9",
      "2025-08-17": "#F5E1FD"
    };

    const calendar = document.getElementById("calendar");
    const countdownEl = document.getElementById("countdown");
    const dodosEl = document.getElementById("dodos");

    const start = new Date(2025, 6, 27); // juillet
    const end = new Date(2025, 7, 17, 12, 51); // aoÃ»t Ã  12:51

    const dates = [];
    let current = new Date(start);
    while (current <= end) {
      dates.push(new Date(current));
      current.setDate(current.getDate() + 1);
    }

    // CrÃ©ation du calendrier
    let todayId = "";
    dates.forEach(date => {
      const yyyyMMdd = date.toISOString().split("T")[0];
      const dayBox = document.createElement("div");
      dayBox.className = "day";
      dayBox.id = `box-${yyyyMMdd}`;

      const weekday = date.toLocaleDateString("fr-FR", { weekday: 'long' });
      const label = `${weekday.charAt(0).toUpperCase() + weekday.slice(1)}<br>${date.toLocaleDateString("fr-FR")}`;

      const checkbox = document.createElement("input");
      checkbox.type = "checkbox";
      checkbox.id = yyyyMMdd;
      if (yyyyMMdd === new Date().toISOString().split("T")[0]) {
        todayId = `box-${yyyyMMdd}`;
      }

      checkbox.checked = localStorage.getItem(yyyyMMdd) === "true";
      checkbox.addEventListener("change", () => {
        localStorage.setItem(yyyyMMdd, checkbox.checked);
      });

      dayBox.innerHTML = `<label for="${yyyyMMdd}">${label}</label><br>`;
      dayBox.appendChild(checkbox);
      calendar.appendChild(dayBox);
    });

    // Scroll automatique vers aujourdâ€™hui
    window.addEventListener("load", () => {
      const el = document.getElementById(todayId);
      if (el) {
        el.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }
    });

    // Mise Ã  jour du compte Ã  rebours
    function updateCountdown() {
      const now = new Date();
      const diff = end - now;

      if (diff <= 0) {
        countdownEl.textContent = "Câ€™est le grand jour !!! ðŸŽ‰";
        dodosEl.textContent = "";
        return;
      }

      const jours = Math.floor(diff / (1000 * 60 * 60 * 24));
      const heures = Math.floor((diff / (1000 * 60 * 60)) % 24);
      const minutes = Math.floor((diff / (1000 * 60)) % 60);
      const secondes = Math.floor((diff / 1000) % 60);

      countdownEl.textContent = `Il reste ${jours} jour${jours !== 1 ? 's' : ''}, ${heures}h ${minutes}min ${secondes}s.`;

      const dodos = Math.ceil(diff / (1000 * 60 * 60 * 24));
      dodosEl.textContent = `Encore ${dodos} dodo${dodos !== 1 ? 's' : ''} avant de le retrouver ðŸ’•`;
    }

    // Fond en fonction de l'heure du jour + date spÃ©ciale
    function setBackground() {
      const now = new Date();
      const hour = now.getHours();
      const today = now.toISOString().split("T")[0];

      if (backgroundColors[today]) {
        document.body.style.backgroundColor = backgroundColors[today];
      } else {
        if (hour < 7 || hour >= 20) {
          document.body.style.backgroundColor = "#2C3E50"; // nuit
        } else if (hour >= 7 && hour < 12) {
          document.body.style.backgroundColor = "#FFEBCC"; // matin
        } else if (hour >= 12 && hour < 18) {
          document.body.style.backgroundColor = "#FFF5E1"; // aprÃ¨s-midi
        } else {
          document.body.style.backgroundColor = "#FFD1DC"; // soirÃ©e
        }
      }
    }

    setInterval(updateCountdown, 1000);
    updateCountdown();
    setBackground();
  </script>
</body>
</html>
